(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"17e8":function(t,e,a){"use strict";a.r(e);var o=a("d476");for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);a("b79c");var c,i,r=a("2877"),u=Object(r["a"])(o["default"],c,i,!1,null,null,null);e["default"]=u.exports},2818:function(t,e,a){"use strict";a("6d72");var o=i(a("f3d3")),n=i(a("17e8")),c=i(a("5157"));function i(t){return t&&t.__esModule?t:{default:t}}a("f4c3"),o.default.prototype.$store=c.default,o.default.config.productionTip=!1,n.default.mpType="app";var r=new o.default(n.default);r.$mount()},5157:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(a("f3d3")),n=r(a("2f62")),c=a("bd71"),i=r(a("e5fb"));function r(t){return t&&t.__esModule?t:{default:t}}o.default.use(n.default);var u={nowbook:"",booklist:[],tagtheme:"",onebook:{},searchbooklist:[],searchword:"",searchcount:0,cartchange:!0,cartcount:0,addresslist:[],editObj:{},changemode:""},s={updatenowbook:function(t,e){t.nowbook=e},judgeLogin:function(e,a){t.navigateTo({url:"/pages/login/main"}),t.showToast({title:"请您先登录",icon:"none",duration:1200,mask:!0})},initbooklist:function(t,e){t.booklist=[],t.tagtheme=e},changebooklist:function(t,e){console.log(e),t.booklist=t.booklist.concat(e)},changeonebook:function(t,e){t.onebook=e},initsearchlist:function(t,e){t.searchbooklist=[],t.searchword=e,t.searchpage=1},changesearchlist:function(t,e){t.searchbooklist=t.searchbooklist.concat(e),t.searchpage++},changecartcount:function(t,e){t.cartcount=e},changeaddresslist:function(t,e){t.addresslist=JSON.parse(e)}},l={getbooklist:function(t){var e=t.commit,a=t.state,o={page:a.booklist.length,key:a.tagtheme};c.fly.get(c.url+"/getbooklist",o).then(function(t){var a=JSON.parse(t.data.data.data);a&&a.length&&(a.forEach(function(t){t.price=t.price.replace("￥0.00",""),t.price=t.price.match(/^￥\d+(?:\.\d*)/)?t.price.match(/^￥\d+(?:\.\d*)/)[0]:"",t.star=t.star.match(/\d(?:\.\d)/)?2*t.star.match(/\d(?:\.\d)/)[0]:0}),console.log("请求成功vuex",a),e("changebooklist",a))}).catch(function(t){console.log("action异步请求失败:",t)})},isbntobookdetail:function(e,a){var o=e.commit;o("updatenowbook",encodeURIComponent(a)),c.fly.get(c.url+"/getbookdetail",{url:a}).then(function(t){console.log("发送成功",t);var e=JSON.parse(t.data.data.data),a={};a.author=e.msgMap.author,a.src=e.msgMap.src,a.name=e.msgMap.name,a.price=e.msgMap.price,a.publisher=e.basicMap["出版社:"];var n=[];Object.keys(e.introduceMap).forEach(function(t){var a={};a.value=e.introduceMap[t],a.name=t,n.push(a)}),Object.keys(e.basicMap).forEach(function(t){var a={};a.value=e.basicMap[t],a.name=t,n.push(a)}),a.introduceMap=n,a.count=1,console.log("onebook:",a),o("changeonebook",a)}),t.navigateTo({url:"/pages/bookdetail/main"})},clickbooktobookdetail:function(t,e){var a=t.dispatch;a("isbntobookdetail",e)},getsearchlist:function(e,a){var o,n,i=e.commit,r=e.state;a?(i("initsearchlist",a),n=1,o=a):(o=r.searchword,n=r.searchpage),c.fly.get(c.url+"/searchreslist",{key:o,page:n}).then(function(e){var o=JSON.parse(e.data.data.data);o&&o.length&&(o.forEach(function(t){t.price=t.price.replace("￥0.00",""),t.price=t.price.match(/^￥\d+(?:\.\d*)/)?t.price.match(/^￥\d+(?:\.\d*)/)[0]:"",t.star=t.star.match(/\d(?:\.\d)/)?2*t.star.match(/\d(?:\.\d)/)[0]:0}),console.log("搜索成功",e,o),a&&t.navigateTo({url:"/pages/searchlist/main"}),i("changesearchlist",o))})},getcartcount:function(t){var e=t.commit;t.state;i.default.get("userInfo")?c.fly.post(c.urlAuth+"/getcartcount",{openid:i.default.get("userInfo")["openId"]}).then(function(t){e("changecartcount",t.data.data.count)}).catch(function(t){console.log("出错了",t)}):e("changecartcount",0)},getaddresslist:function(t){var e=t.commit;t.state;c.fly.get(c.urlAuth+"/getaddresslist").then(function(t){e("changeaddresslist",t.data.data.data[0].List)}).catch(function(t){})}},d=new n.default.Store({state:u,mutations:s,actions:l}),f=d;e.default=f}).call(this,a("543d")["default"])},7548:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a("bd71"),o(a("e5fb"));function o(t){return t&&t.__esModule?t:{default:t}}var n={data:function(){return{userInfo:{}}},created:function(){console.log("app created and cache logs by setStorageSync")},mounted:function(){}};e.default=n},b79c:function(t,e,a){"use strict";var o=a("c7af"),n=a.n(o);n.a},c7af:function(t,e,a){},d476:function(t,e,a){"use strict";a.r(e);var o=a("7548"),n=a.n(o);for(var c in o)"default"!==c&&function(t){a.d(e,t,function(){return o[t]})}(c);e["default"]=n.a},f4c3:function(t,e,a){}},[["2818","common/runtime","common/vendor"]]]);